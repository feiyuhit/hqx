<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
<title>index</title>
<meta name="description" content="">
<meta name="keywords" content="">
<link href="" rel="stylesheet">
</head>
<style type="text/css">
.content{
    position: absolute;
    top: 0;
    left: 0;
    z-index: 10;
    width: 100%;
}
div,
p {
  margin: 0 auto;
}

.blast {
  display: inline-block;
  opacity: 1;
  display: none;
}
body{
    background-color: #333;
    color: #f2f2f2;
}
.pink {
    color: pink;
}
.padding54{
    padding-left: 54px;
}
</style>
<body>
<!-- page1 -->
<div class="page1" id="page1">
    <div class="content" id="content">
        <div class="code" id="code">
            <div  class="" block-id="1" speed="50"  delay="2000"><span class="pink padding54">hello sasa</span> I am  hongqiuxia 第一行内容第一行内容第一行内容<span >第一行内容第一行内容第一行内容第一行</span>内容第一行内容第一行内容第一行内容第一行内容第一行内容第一行内容第一行内容第一行内容第一行内容第一行内容第一行内容第一行内容</div>
            <div class="padding54" block-id="2" speed="20" delay="2000"><span class="pink padding54">hello sasa</span> I am  hongqiuxia 二二二二二二二二二二二二二二二二二二二二二二二二二二二二二二二二二二二二</div>
            <div class="padding54" block-id="3" speed="60" delay="2000"><span class="pink padding54">hello sasa</span> I am  hongqiuxia 三三三三三三三三三三三三三三三三三三三三三三三三三三三三三三三三三三三三三三三三三三三三</div>
        </div>
    </div>
    <!-- #进度条 -->
    <!-- #弹层 -->
</div>
<!-- /page1 -->
</body>

<script src="../js/jquery.min.js"></script>
<script src="../js/jquery.blast.min.js"></script>
<script type="text/javascript">
$(function(){
    var $content = $("#content");
    var $code = $("#code");
    var $chars = $code.blast({delimiter:"character"}); 
    var prevBlockId = 0;
    var defaultSpeed = 30;   //每个字出现的速度30ms
    var defaultDelay = 200; //延迟200ms
    $chars.css("display","none");
    play($chars); //调用play方法
    function play($chars){
        var total = $chars.length;

        function _display(i){
            if(i==total){
                return;
            }
            var $curBlock = $($chars[i]).closest("[block-id]");
           $curBlock.attr("aaaaaaa");
            var blockId = $curBlock.attr("block-id");
            if(blockId && blockId != prevBlockId ){
                prevBlockId = blockId;
                var delay = $curBlock.attr("delay") ? parseInt($curBlock.attr("delay")) : defaultDelay;
                setTimeout(function(){
                    _display(i);
                },delay);
                return;
            }
            $($chars[i]).css("display","inline-block");
            var scrollTop = $content.scrollTop - $content.clientHeight;
            if(scrollTop>0){
                $content.scrollTop(scrollTop);
            }
            var speed  = $curBlock.attr("speed") ? parseInt($curBlock.attr("speed")) : defaultSpeed;
            if(speed === 0){
                _display(i+1);
            }else{
                setTimeout(function(){
                    _display(i+1);
                },speed);
            }
        }
        _display(0);
    }
});
</script>
</html>